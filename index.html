function generateStory(type) {
  const promptInput = document.getElementById('promptInput');
  const storyOutput = document.getElementById('storyOutput');
  const promptText = promptInput.value.trim();

  if (promptText.length === 0) {
    alert('Please write a prompt.');
    return;
  }

  const data = {
    prompt: promptText,
    max_tokens: 200,
    temperature: type === 'happy' ? 0.5 : 0.7,
    top_p: 1,
    frequency_penalty: 0,
    presence_penalty: 0
  };

  axios.post('https://cors-anywhere.herokuapp.com/https://api.openai.com/v1/engines/text-davinci-003/completions', data, {
      headers: {
        'Authorization': `Bearer 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`,
        'Content-Type': 'application/json'
      }
    })
    .then(response => {
      storyOutput.value = response.data.choices[0].text.trim();
    })
    .catch(error => {
      console.error('Error generating story:', error);
      alert('Failed to generate story. Please check the console for details.');
    });
}
